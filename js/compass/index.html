<html manifest="index.manifest"><head><title>Compass</title>
<link rel="apple-touch-icon" href="compass-icon.png"/>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="viewport" content="width=device-width; initial-scale=1.0; user-scalable=no;">
<style>
body {
    margin: 0;
    padding: 0;
    font-family: Helvetica, Arial;
    overflow: hidden;
}

* {
    -webkit-touch-callout: none;
    -webkit-tap-highlight-color: transparent;
    -webkit-user-select: none;
    -webkit-text-size-adjust: none;
}

#compass {
    width: 0px;
    -webkit-backface-visibility: hidden;
    -webkit-transition: -webkit-transform 100ms linear;
}

p {
    text-align: center;
}
</style>
</head>
<body>
<img src="compass.png" id="compass"/>
<p id="status"> </p>
<script>
window.setTimeout(function () {
    var dir = 0,
        ref = 0;

    if ('ondeviceorientation' in window) {

        window.ondeviceorientation = function(e) {
            var delta = Math.round(e.alpha) - ref;
            ref = Math.round(e.alpha);
            if (delta < -180)
                delta += 360;
            if (delta > 180)
                delta -= 360;
            dir += delta;
        };

        window.setInterval(function() {
            document.getElementById('compass').style.webkitTransform = 'rotate(' + dir + 'deg)';
        }, 100);

        document.getElementById('status').innerText = 'Compass by Ariya Hidayat';
        document.getElementById('compass').style.width = Math.min(screen.width, screen.height) + 'px';
    } else {
        document.getElementById('status').innerText = 'Sorry! The browser does not support Device Orientation API.';
        document.getElementById('status').style.position = 'absolute';
        document.getElementById('status').style.width = '100%';
        document.getElementById('status').style.top = '50%';
    }
}, 200);
</script>
</body>
</html>
